#! /usr/bin/env ruby
require 'open-uri'
require 'json'
origin_url = `git remote show origin | awk '/Fetch/ {print $3}'`
origin_url.tr!("\n",'')
repo_name = origin_url.gsub('github.com','').gsub(/http[s]:\/\//, '').gsub('.git','')
repo_parts = repo_name.split('/').reject!(&:empty?)
url = "https://api.github.com/repos/#{repo_parts[0]}/#{repo_parts[1]}"
result = JSON.parse(open(url).read)
parent =  result['parent']
if parent
  system %Q{git remote add upstream #{parent['clone_url']}}
end
